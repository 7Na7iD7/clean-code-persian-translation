## مقدمه کتاب 

تنها معیار درست و حسابی برای کیفیت کد: تعداد "این دیگه چیه؟!"ها در دقیقه

اگه کدت جوری باشه که هر دقیقه یکی نگاش کنه و بگه "این چه سمیه؟!"، تبریک می‌گم، معیار کیفیتت رو پیدا کردی! هر چی "WTF" بیشتر، کدت بیشتر تو چشم می‌زنه، البته از نوع منفی‌ش!

کد خوب.

کدی که مثل یه کوئیل خوشگل و تمیز تو گیت‌هاب می‌مونه؛ هر کی می‌بینتش می‌گه "اوف، این دیگه کیه که انقدر شاخه؟"

کد بد.

کدی که انگار با لودر ریختنش تو ریپازیتوری، یه نگاه بهش می‌کنی می‌خوای لپ‌تاپو از پنجره پرت کنی بیرون!

با اجازه‌ی ویژه‌ی تام هولوردا نقل شده، از سایت osnews.com/story/19266/WTFs_m

اینم با یه دست‌مریزاد درست‌حسابی از تام جون، از سایتش قرض گرفتیم—دمش گرم که گفت "بزن بریم!"

حالا بگو ببینم، کد تو پشت کدوم در قایمه؟

خودت بسم‌الله کن بگو، کدت کدوم درو نشون می‌ده؟ از اون خوشگلای چشم‌نوازه یا از اونایی که آدمو دق می‌ده؟

تیمی که توشی یا شرکتت کدوم در رو باز می‌کنه؟

تیم‌تون یا شرکت‌تون چه خطی رو می‌رن؟ کارشون برق از سر آدم می‌پرونه یا فقط گندشو بالا می‌آرن؟

اصلاً چرا توی اون اتاقیم؟

کلاً چرا تو این موقعیت عجیب غریب گیر کردیم؟ کی ما رو پرت کرد تو این چاه ویل؟

یه مرور کد معمولیه یا اینکه تازه پروژه رو زنده کردیم و یهو با یه عالمه مشکل گنده روبه‌رو شدیم؟

فقط داریم کد رو یه ورقی می‌زنیم یا پروژه رو تازه دیپلوی کردیم و یهو دیدیم "ای بابا، چه گلی به سرمون زدیم؟"

آیا داریم با عجله و استرس دیباگ می‌کنیم و روی کدی که فکر می‌کردیم کار می‌کنه زل زدیم؟

آیا داریم با دست و دل لرزون دیباگ می‌کنیم و به کدی که فکر می‌کردیم اوکیه چشم دوختیم، ولی حالا انگار داره بهمون زبون درمی‌آره؟

مشتری‌ها دارن دسته‌دسته فرار می‌کنن و مدیرا هم مثل بختک افتادن رو سرمون؟

مشتریا دارن مثل موش از کشتی غرق‌شده می‌پرن بیرون و مدیرا هم مثل جن‌گیرا بالای سرمون وایستادن و غر می‌زنن؟

چطوری مطمئن بشیم وقتی اوضاع قاراشمیش می‌شه، پشت در درست وایستادیم؟

چطور کاری کنیم که وقتی همه‌چیز به هم می‌ریزه، ما از اونایی باشیم که می‌گن "نگران نباش، من اوستاشم!"؟

جوابش یه کلمه‌ست: "استادی".

پاسخش تو یه کلمه خلاصه می‌شه: "حرفه‌ای‌گری"، همون چیزی که تو گیت‌هابت باید داد بزنه!

یاد گرفتن استادی تو این کار دو تا پایه داره: دونستن و جون کندن.

برای اینکه تو این بازی اوستا شی، دو تا چیز لازمه: علم و عرق‌ریختن تا حد مرگ!

باید اصول، الگوها، روش‌ها و ترفندهایی که یه کدباز قهار بلده رو تو کله‌ت فرو کنی، بعدشم اینا رو با کار سخت و تمرین شبانه‌روزی تو انگشتات، چشات و دل و روده‌ت حک کنی.

باید فوت‌و‌فن کار رو مثل آب خوردن یاد بگیری و بعد انقدر کد بزنی و خطا بدی که انگشتات خود به خود راهشو پیدا کنن، چشات خطاها رو تو یه نگاه ببینن و دلت بگه "این دیگه مال منه!"

من می‌تونم فیزیک دوچرخه‌سواری رو بهت یاد بدم.

من می‌تونم مثل یه معلم باحال، قانونای دوچرخه‌سواری رو برات رو تخته بکشم.

واقعاً هم معادله‌هاش ساده‌ست.

باور کن، ریاضیش از حساب کتاب خرج خونه هم آسون‌تره!

جاذبه، اصطکاک، تکانه‌ی زاویه‌ای، مرکز جرم و اینجور چیزا رو می‌شه تو کمتر از یه صفحه فرمول نشون داد.

نیروی جاذبه، سایش، چرخش و تعادل رو می‌تونم تو یه برگه‌ی A4 برات جا بدم.

با اون فرمول‌ها می‌تونم بهت ثابت کنم دوچرخه‌سواری شدنیه و همه‌ی دانشی که لازم داری رو بهت بدم.

با یه مشت فرمول بهت نشون می‌دم که دوچرخه‌سواری کار سختی نیست و کلید موفقیتشو می‌ذارم کف دستت.

ولی بازم اولین باری که سوار دوچرخه بشی، پخش زمین می‌شی!

ولی وقتی پاتو می‌ذاری رو پدال، بازم با مخ می‌ری تو جوب، چون دونستن با انجام دادن فرق داره!

کدنویسی هم فرقی نداره.

کدنویسی هم همین قصه‌ست، حرف و عملش دو تا جاده‌ی جداست!

می‌تونیم همه‌ی اون اصول قشنگ و حال‌خوب‌کن "کد تمیز" رو برات بنویسیم و بعد بگیم خودت برو کارش رو بکن (یعنی بذاریم سوار دوچرخه بشی و زمین بخوری)، ولی اون موقع ما چه جور معلمی هستیم و تو چه جور شاگردی؟

می‌تونیم یه عالمه قانون باحال و شیک درباره‌ی کد تمیز برات ردیف کنیم و بگیم "برو حالشو ببر"، ولی اگه فقط بشینیم نگاهت کنیم که چطور زمین می‌خوری، ما معلم به درد بخوری هستیم؟ تو هم شاگرد درست‌حسابی‌ای می‌شی؟

نه بابا! این کتاب اینجوری کار نمی‌کنه.

نه داداش! این کتاب از اون مدلای "بخون و حال کن" نیست، قراره باهات کار بکشه!

یاد گرفتن اینکه چطور کد تمیز بنویسی، کار آسونی نیست.

برای اینکه کدنویسی رو مثل یه اوستا یاد بگیری، باید حسابی جون بکنی، از اون کارای راحت‌طلبانه نیست!

فقط دونستن اصول و الگوها کافی نیست.

فکر نکنی فقط با خوندن دو تا فرمول و الگو کار تمومه، اینجا باید خودتو نشون بدی!

باید براش عرق بریزی.

باید انقدر عرق بریزی که آخرش بگن "این دیگه کیه که انقدر جونشو گذاشته؟"

باید خودت تمرین کنی، زمین بخوری، ببینی کجات اشتباه کردی.

باید خودت آستین بالا بزنی، چند بار با کله بری زمین، بعد بلند شی ببینی کجای کارت می‌لنگه.

باید ببینی بقیه چطور تمرین می‌کنن و چطور خرابکاری می‌کنن.

باید زل بزنی به بقیه که چطور کد می‌زنن و چطور گند می‌زنن به کارشون.

باید ببینی چطور تلو تلو می‌خورن و برمی‌گردن عقب.

باید نگاه کنی چطور مثل جوجه‌تیغی گم‌شده تو مه راهشونو گم می‌کنن و دوباره از نو شروع می‌کنن.

باید ببینی چطور سر تصمیم‌هاشون عذاب می‌کشن و بهای انتخاب‌های اشتباه‌شون رو می‌دن.

باید ببینی چطور سر دوراهی می‌مونن و آخرش با انتخاب اشتباه، حسابی تو چاه می‌افتن.

خودتو آماده کن، چون خوندن این کتاب کار می‌خواد.

خودتو جمع کن، چون این کتاب قراره تو رو بذاره تو یه مسابقه‌ی نفس‌گیر!

این یه کتاب "حال‌خوب‌کن" نیست که تو هواپیما بخونیش و تا وقتی پیاده شی تمومش کنی.

از اون کتابای لوس و آب‌دوغ‌خیاری نیست که تو پرواز دو سوته تمومش کنی و بگی "اوکی، حالم خوب شد!"

این کتاب تو رو به کار وا می‌داره، اونم کار حسابی.

این کتاب قراره تو رو بندازه تو یه رینگ بوکس، از اون کارای درست‌حسابی که عرقتو درمی‌آره!

چه کاری؟

چه جور کاری؟

قراره کد بخونی—یه عالمه کد!

قراره انقدر کد جلو چشمت رژه بره که شب خوابشونو ببینی!

و باید فکر کنی که چی تو این کدها درست و چیش غلطه.

باید مغزتو بذاری رو دنده‌ی تحلیل که ببینی این کد چرا شاخه و اون یکی چرا افتضاحه.

ازت می‌خوایم همراه ما بیای، ماژول‌ها رو باز کنیم، دوباره ببندیمشون.

قراره باهامون بیای تو دل کد، همه‌چیزو ریز ریز کنیم و دوباره مثل لگو بچینیمشون.

این کار وقت و انرژی می‌بره، ولی قول می‌دیم ارزشش رو داشته باشه.

این ماجرا وقت و جون می‌خواد، ولی آخر خط می‌گی "دمتون گرم، ارزششو داشت!"

کتاب رو سه تکه کردیم.

این کتابو مثل یه پیتزای سه‌تکه برات برش زدیم.

چند فصل اول درباره‌ی اصول، الگوها و روش‌های نوشتن کد تمیز حرف می‌زنن.

چند تا فصل اول مثل یه نقشه‌ی گنجه که بهت نشون می‌ده چطور کد تمیز بزنید که همه انگشت به دهن بمونن.

تو این فصل‌ها کلی کد هست که خوندنشون چالش‌برانگیزه.

اینجا پر از کداییه که خوندنشون مثل حل کردن جدول سودوکو می‌مونه، باید حسابی زور بزنی!

اینا تو رو برای بخش دوم آماده می‌کنن.

اینا مثل گرم کردن قبل مسابقه‌ست، که برای راند دوم آماده‌ت کنه.

اگه بعد از خوندن بخش اول کتاب رو بذاری کنار، آقا یا خانم، شانس‌تو امتحان کن!

اگه بخش اول رو خوندی و گفتی "دیگه کافیه"، داداش یا آبجی، برو یه دستی به شانس بزن ببین چی می‌شه!

بخش دوم کتاب کار سخت‌تره.

بخش دوم مثل یه کوهنوردی تو قله‌ی دماونده، باید حسابی جون بکنی!

چندتا مطالعه‌ی موردی داره که هر کدوم از قبلی پیچیده‌تره.

چند تا کیس استادی داره که هر کدوم از اون یکی سخت‌تره، مثل یه بازی که لِوِلاش هی سخت‌تر می‌شه.

هر مطالعه یه تمرین برای تمیز کردن کده—تبدیل کدی که یه سری مشکل داره به کدی که مشکلاش کمتره.

هر کیس یه ماموریت باحاله که باید کدای شلخته رو بگیری، مثل یه قهرمان تمیزشون کنی.

جزئیات این بخش خیلی زیاده.

اینجا پر از ریزه‌کاریه، انگار داری با ذره‌بین کد رو نگاه می‌کنی.

باید هی بری بین متن و لیست کدها جلو عقب کنی.

باید مثل یه کارآگاه هی بین خطوط و کدها ورجه‌وورجه کنی.

باید کدی که باهاش کار می‌کنیم رو تحلیل کنی، بفهمیش و قدم به قدم با منطق ما برای هر تغییری که می‌دیم همراه شی.

باید کد رو مثل یه پازل بشکنی، بفهمی چی به چیه و با هر حرکتمون بگی "آها، اینجوری!"

یه وقتایی بذار کنار، چون این بخش ممکنه چند روزت رو بگیره.

یه تایم خالی کن، چون این بخش مثل یه سریال چند قسمتیه که چند روزت رو پر می‌کنه.

بخش سوم پاداشته.

بخش سوم مثل جایزه‌ی آخر خطه، همون که منتظرشی!

یه فصل تک که توش یه لیست از ترفندها و بوهای بد (smells) جمع کردیم که موقع کار روی مطالعه‌های موردی بهشون رسیدیم.

یه فصل باحال که پر از فوت‌و‌فن و گنداییه که تو کیس استادی‌ها پیداشون کردیم.

وقتی داشتیم کدها رو تمیز می‌کردیم، هر دلیلی که برای کارامون داشتیم رو به‌عنوان یه ترفند یا بوی بد ثبت کردیم.

هر جا کد رو شستیم و پهن کردیم، هر چی به ذهنمون رسید که "این چرا اینجوریه؟" رو یادداشت کردیم.

سعی کردیم بفهمیم خودمون به کدی که می‌خوندیم و تغییرش می‌دادیم چه حسی داریم، چرا اون حس رو داریم و چرا اون کار رو کردیم.

مثل یه روانشناس نشستیم خودمونو کاویدیم که "چرا این کد حالمو گرفت؟ چرا اینو عوض کردم؟"

نتیجه‌ش یه پایگاه دانش شده که نشون می‌ده ما موقع نوشتن، خوندن و تمیز کردن کد چطور فکر می‌کنیم.

آخرش یه گنجینه ساختیم که نشون می‌ده کدبازا تو سرشون چه خبره وقتی دارن کد می‌زنن، می‌خونن یا تمیزش می‌کنن.

این پایگاه دانش اگه بخش دوم کتاب رو با دقت نخونی، خیلی به کارت نمیاد.

اگه بخش دوم رو ول کنی، این گنج مثل یه نقشه‌ی گنجه که هیچ‌وقت بازش نمی‌کنی!

تو اون مطالعه‌های موردی، هر تغییری که دادیم رو با ارجاع به ترفندها علامت‌گذاری کردیم.

تو کیس استادی‌ها، هر جا دست بردیم یه تگ گذاشتیم که بگه "اینو با این ترفند درست کردیم!"

این ارجاع‌ها با کروشه‌ها اینجوری میان: [H22].

این تگا مثل یه کد تقلب می‌مونن، مثلاً [H22] که بگه "اینجا چه اتفاقی افتاد!"

اینطوری می‌تونی ببینی هر ترفند تو چه موقعیتی استفاده و نوشته شده!

مثل یه فیلم جنایی می‌مونه که می‌تونی ببینی هر ترفند کجا به کار اومد و چرا!

ارزش اصلی ترفندها به خودشون نیست، به رابطه‌شون با تصمیم‌های ریز و درشتیه که موقع تمیز کردن کدها گرفتیم.

مهم خود ترفندا نیستن، مهم اینه که چطور اینا به تصمیمای ریزمون تو کد تمیز کردن وصل شدن.

برای اینکه این رابطه‌ها رو بهتر بفهمی، آخر کتاب یه جدول ارجاع گذاشتیم که شماره‌ی صفحه‌ی هر ارجاع رو نشون می‌ده.
یه راهنما آخر کتاب چیدیم که مثل GPS بگه هر ترفند کجای مسیر بوده.

می‌تونی ازش استفاده کنی و ببینی هر ترفند کجاها به کار رفته.

می‌تونی بزنی تو خطش و مثل یه کارآگاه دنبال کنی هر ترفند کجا خودشو نشون داده.

اگه فقط بخش اول و سوم رو بخونی و مطالعه‌های موردی رو بپری، یه کتاب "حال‌خوب‌کن" دیگه درباره‌ی نوشتن نرم‌افزار خوب خوندی و تموم.

اگه فقط اول و آخرشو بخونی و وسطشو بپری، یه کتاب خوشگل دیگه خوندی که فقط بهت لبخند زده و رفته!

ولی اگه وقت بذاری و مطالعه‌های موردی رو کار کنی، هر قدم کوچیک و هر تصمیم ریز رو دنبال کنی، اگه خودتو جای ما بذاری و مجبور کنی همون راهی که ما فکر کردیم رو فکر کنی، اون موقع یه درک خیلی عمیق‌تر از اون اصول، الگوها، روش‌ها و ترفندها پیدا می‌کنی.

ولی اگه بشینی پاش و کیس استادی‌ها رو مو به مو دنبال کنی، خودتو بذاری جای ما و همون راهو بری، اون موقع یه چیزایی دستت می‌آد که تو کدنویسی غوغا می‌کنه.

دیگه فقط یه دانش "حال‌خوب‌کن" نیست.

دیگه فقط یه سری حرف قشنگ تو ذهنت نمی‌مونه که بگی "آره، خوبه!"

تو دل و جونت، انگشتات و قلبت جا می‌گیره.
تو دلت، دستات و وجودت ریشه می‌کنه، انگار بخشی از خودت می‌شه.
مثل وقتی می‌شه که دوچرخه‌سواری رو یاد گرفتی و دوچرخه دیگه یه تکه از اراده‌ت می‌شه.
مثل وقتی که دوچرخه‌سواری رو اوستا می‌شی و دوچرخه دیگه فقط یه وسیله نیست، انگار خودتی که داری رو هوا می‌ری!S
